/**
 * MOBILE NO BLUR - TOTAL ELIMINATION
 *
 * Remove ALL backdrop-blur on mobile for maximum performance
 * Replace with solid backgrounds optimized for iPhone 14 Pro Max
 *
 * Goal: 60fps scroll with zero GPU overhead
 */

/* =========================================
   GLASS CARDS - Solid backgrounds (zero blur)
   ========================================= */

.mobile-device .glass-card,
.mobile-device .glass-base,
.mobile-device .glass-card-cta,
.mobile-device [class*="glass-"] {
  /* Solid dark background - no transparency, no blur */
  background: #0F1927 !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;

  /* Simple border - reduced complexity */
  border: 1px solid rgba(255, 255, 255, 0.1) !important;

  /* Minimal shadow - single layer only */
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.25) !important;
}

/* Remove ALL pseudo-elements that create effects */
.mobile-device .glass-card::before,
.mobile-device .glass-card::after,
.mobile-device .glass-card-cta::before,
.mobile-device .glass-card-cta::after,
.mobile-device [class*="glass-"]::before,
.mobile-device [class*="glass-"]::after {
  display: none !important;
  opacity: 0 !important;
}

/* =========================================
   HEADER - SOLID METALLIC GRAY (no blur)
   ========================================= */

.mobile-device .header-liquid-glass {
  /* CRITICAL: Preserve fixed positioning */
  position: fixed !important;
  z-index: var(--z-mobile-header, 9999) !important;

  /* SOLID METALLIC GRAY - no blur for performance */
  background: var(--mobile-metallic-gray, rgba(45, 52, 64, 0.98)) !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;

  /* Simple shadow */
  box-shadow: var(--mobile-metallic-shadow, 0 2px 8px rgba(0, 0, 0, 0.3)) !important;
  border: 1px solid var(--mobile-metallic-border, rgba(255, 255, 255, 0.12)) !important;

  /* GPU acceleration for sticky positioning */
  transform: translate3d(0, 0, 0) !important;
  -webkit-transform: translate3d(0, 0, 0) !important;
  will-change: transform !important;
  backface-visibility: hidden !important;
  -webkit-backface-visibility: hidden !important;
  contain: layout style paint !important;
  isolation: isolate !important;
}

.mobile-device .header-liquid-glass::before,
.mobile-device .header-liquid-glass::after {
  display: none !important;
}

/* =========================================
   BOTTOM BAR - SOLID METALLIC GRAY (no blur)
   ========================================= */

.mobile-device .new-mobile-bottom-bar {
  /* CRITICAL: Preserve fixed positioning */
  position: fixed !important;
  z-index: var(--z-mobile-bottom-bar, 9996) !important;

  /* GPU acceleration for sticky positioning */
  transform: translate3d(0, 0, 0) !important;
  -webkit-transform: translate3d(0, 0, 0) !important;
  will-change: transform !important;
  backface-visibility: hidden !important;
  -webkit-backface-visibility: hidden !important;
  contain: layout style paint !important;
  isolation: isolate !important;
}

.mobile-device .new-mobile-bottom-bar-container {
  /* SOLID METALLIC GRAY - no blur for performance */
  background: var(--mobile-metallic-gray, rgba(45, 52, 64, 0.98)) !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;

  box-shadow: var(--mobile-metallic-shadow-bottom, 0 -2px 8px rgba(0, 0, 0, 0.3)) !important;
  border: 1px solid var(--mobile-metallic-border, rgba(255, 255, 255, 0.12)) !important;
}

.mobile-device .new-mobile-bottom-bar-container::before,
.mobile-device .new-mobile-bottom-bar-container::after {
  display: none !important;
}

/* Bottom bar icon containers - solid backgrounds */
.mobile-device .new-bottom-bar-icon-container {
  background: rgba(255, 255, 255, 0.1) !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

/* =========================================
   HEADER BUTTONS - SOLID (no blur)
   ========================================= */

.mobile-device .header-liquid-glass .glass-orb-button,
.mobile-device .header-liquid-glass button {
  background: rgba(255, 255, 255, 0.1) !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

/* =========================================
   SIDEBAR/DRAWER - Solid background
   ========================================= */

.mobile-device .sidebar,
.mobile-device .mobile-drawer,
.mobile-device [class*="drawer"]:not(.global-chat-drawer):not(.unified-coach-drawer),
.mobile-device [role="dialog"]:not([class*="chat"]) {
  background: rgba(15, 25, 39, 0.98) !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

/* =========================================
   GRADIENT OPTIMIZATION - iPhone 14 Pro Max
   Simplify complex gradients that cause performance issues
   ========================================= */

.mobile-device [style*="radial-gradient"] {
  /* Force simpler backgrounds instead of complex gradients */
  background-image: none !important;
}

/* Simplify box-shadows - max 2 layers on mobile */
.mobile-device * {
  /* Limit to max 2 box-shadows for performance */
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.25) !important;
}

/* Exception: keep minimal shadow on floating elements */
.mobile-device .unified-floating-button,
.mobile-device .floating-chat-button,
.mobile-device [class*="floating-"] {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
}

/* =========================================
   SIMPLIFY COLOR-MIX FOR MOBILE
   Replace complex color-mix with solid colors
   ========================================= */

.mobile-device [style*="color-mix"] {
  /* Browser will handle color-mix but avoid in critical paths */
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

/* =========================================
   DISABLE WILL-CHANGE ON STATIC ELEMENTS
   Only use on actively animating elements
   ========================================= */

.mobile-device * {
  will-change: auto !important;
}

/* Exception: Keep will-change on scrollable containers */
.mobile-device .overflow-y-auto,
.mobile-device .overflow-auto,
.mobile-device [class*="scroll"] {
  will-change: scroll-position !important;
}

/* =========================================
   MODALS/OVERLAYS - Solid backgrounds
   ========================================= */

.mobile-device [class*="modal"],
.mobile-device [class*="overlay"],
.mobile-device [role="alertdialog"] {
  background: rgba(15, 25, 39, 0.98) !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

/* Modal backdrop - solid dark */
.mobile-device [class*="backdrop"],
.mobile-device [class*="overlay"]::before {
  background: rgba(0, 0, 0, 0.8) !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

/* =========================================
   TOOLTIPS/POPOVERS - Solid backgrounds
   ========================================= */

.mobile-device [role="tooltip"],
.mobile-device [class*="tooltip"],
.mobile-device [class*="popover"] {
  background: #1A2332 !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

/* =========================================
   FLOATING ELEMENTS - PRESERVE POSITIONING
   ========================================= */

.mobile-device .floating-chat-button,
.mobile-device .floating-voice-coach-button,
.mobile-device .unified-floating-button,
.mobile-device [class*="floating"]:not([class*="floating-generate"]) {
  /* CRITICAL: Preserve fixed positioning */
  position: fixed !important;
  z-index: var(--z-mobile-fab, 9997) !important;

  /* GPU acceleration for sticky positioning */
  transform: translate3d(0, 0, 0) !important;
  -webkit-transform: translate3d(0, 0, 0) !important;
  will-change: transform !important;
  backface-visibility: hidden !important;
  -webkit-backface-visibility: hidden !important;

  /* Solid metallic for FAB buttons */
  background: var(--mobile-metallic-gray, rgba(45, 52, 64, 0.98)) !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

/* =========================================
   CHAT/VOICE COMPONENTS - SOLID METALLIC
   ========================================= */

.mobile-device .chat-notification-bubble {
  /* CRITICAL: Preserve fixed positioning */
  position: fixed !important;
  z-index: var(--z-mobile-chat-bubble, 9998) !important;

  /* GPU acceleration for sticky positioning */
  transform: translate3d(0, 0, 0) !important;
  -webkit-transform: translate3d(0, 0, 0) !important;
  will-change: transform !important;
  backface-visibility: hidden !important;
  -webkit-backface-visibility: hidden !important;

  /* SOLID METALLIC GRAY */
  background: var(--mobile-metallic-gray, rgba(45, 52, 64, 0.98)) !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
  box-shadow: var(--mobile-metallic-shadow, 0 2px 8px rgba(0, 0, 0, 0.3)) !important;
  border: 1px solid var(--mobile-metallic-border, rgba(255, 255, 255, 0.12)) !important;
}

.mobile-device .voice-coach-panel,
.mobile-device .global-chat-drawer,
.mobile-device .unified-coach-drawer,
.mobile-device [class*="chat-"]:not(.glass-card):not(.chat-notification-bubble) {
  background: var(--mobile-metallic-gray-dark, rgba(38, 44, 54, 0.98)) !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

/* =========================================
   GENERIC CARDS - Solid backgrounds
   ========================================= */

.mobile-device [class*="card-"]:not(.new-bottom-bar-icon-container):not(.glass-orb-button) {
  background: #0F1927 !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

/* =========================================
   SHEEN/SPOTLIGHT EFFECTS - Remove
   ========================================= */

.mobile-device .glass-sheen,
.mobile-device [class*="sheen"],
.mobile-device [class*="spotlight"] {
  display: none !important;
  opacity: 0 !important;
}

/* =========================================
   FALLBACK: Media query based
   ========================================= */

@media (max-width: 768px), (hover: none), (pointer: coarse) {
  /* Solid glass cards by default */
  .glass-card:not(.header-liquid-glass):not(.new-mobile-bottom-bar-container):not(.floating-chat-button):not(.floating-voice-coach-button) {
    background: #0F1927 !important;
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
  }

  /* Light blur for navigation */
  .header-liquid-glass,
  .new-mobile-bottom-bar-container {
    backdrop-filter: blur(8px) saturate(130%) !important;
    -webkit-backdrop-filter: blur(8px) saturate(130%) !important;
  }

  /* Light blur for floating buttons */
  .floating-chat-button,
  .floating-voice-coach-button {
    backdrop-filter: blur(6px) saturate(120%) !important;
    -webkit-backdrop-filter: blur(6px) saturate(120%) !important;
  }
}

/* =========================================
   LOW-END DEVICES: Reduce blur further
   ========================================= */

@media (max-width: 480px) {
  /* Only navigation keeps minimal blur on very small screens */
  .header-liquid-glass,
  .new-mobile-bottom-bar-container {
    backdrop-filter: blur(6px) !important;
    -webkit-backdrop-filter: blur(6px) !important;
  }

  .glass-card:not(.header-liquid-glass):not(.new-mobile-bottom-bar-container) {
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
  }
}
