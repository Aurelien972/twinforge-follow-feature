/* =========================================
   GLASSMORPHISM CONTROL SYSTEM
   Désactivation des effets glass pour performances
   ========================================= */

/*
  Ce fichier gère la désactivation des animations du fond de l'application
  pour les utilisateurs avec des appareils peu performants.

  Mode performance: Désactive UNIQUEMENT les animations du fond de l'app
  NE TOUCHE PAS: header, sidebar, bottom bar, boutons flottants
*/

/* =========================================
   GLOBAL GLASSMORPHISM DISABLE
   ========================================= */

.glassmorphism-disabled {
  /* Variables simplifiées pour mode performance */
  --glass-blur-disabled: 0px;
  --glass-saturate-disabled: 100%;
  --shadow-simple: 0 2px 8px rgba(0, 0, 0, 0.15);
  --shadow-elevated: 0 4px 12px rgba(0, 0, 0, 0.2);
}

/* =========================================
   ANIMATIONS DU FOND - DÉSACTIVATION COMPLÈTE
   ========================================= */

/* Désactiver toutes les animations des particules de fond */
.glassmorphism-disabled .forge-particle,
.glassmorphism-disabled .cosmic-forge-particles,
.glassmorphism-disabled *[class*="particle"] {
  animation: none !important;
  opacity: 0 !important;
}

/* Désactiver les animations de pulse et glow du fond - SAUF pour les éléments de navigation */
.glassmorphism-disabled *[class*="borderPulse"]:not(.header-liquid-glass *):not(.new-mobile-bottom-bar *):not(.sidebar-glass-enhanced *):not(.floating-chat-button *):not(.central-actions-menu *),
.glassmorphism-disabled *[class*="glowPulse"]:not(.header-liquid-glass *):not(.new-mobile-bottom-bar *):not(.sidebar-glass-enhanced *):not(.floating-chat-button *):not(.central-actions-menu *),
.glassmorphism-disabled *[class*="activePulse"]:not(.header-liquid-glass *):not(.new-mobile-bottom-bar *):not(.sidebar-glass-enhanced *):not(.floating-chat-button *):not(.central-actions-menu *) {
  animation: none !important;
}

/* Désactiver les animations breathing et pulse CSS */
.glassmorphism-disabled .breathing-icon,
.glassmorphism-disabled .icon-pulse-css,
.glassmorphism-disabled .particle-css {
  animation: none !important;
}

/* =========================================
   FOND AVEC EFFETS RADIAUX - SIMPLIFICATION
   ========================================= */

/* Le fond cosmique doit rester fixe mais sans animations */
.glassmorphism-disabled .bg-twinforge-visionos {
  position: fixed !important;
  inset: 0 !important;
  z-index: -10 !important;
  transform: translateZ(0) !important;
  will-change: auto !important;
}

/* Les effets radiaux restent en arrière-plan fixe sans animations */
.glassmorphism-disabled .cosmic-forge-particles {
  position: fixed !important;
  inset: 0 !important;
  z-index: -1 !important;
  pointer-events: none !important;
  transform: translateZ(0) !important;
  will-change: auto !important;
  animation: none !important;
  opacity: 0 !important;
}

/* =========================================
   PRESERVE ESSENTIAL FUNCTIONALITY
   ========================================= */

/* Les focus states pour l'accessibilité */
.glassmorphism-disabled *:focus-visible {
  outline: 3px solid rgba(24, 227, 255, 0.6) !important;
  outline-offset: 3px !important;
}

/* Les états de chargement essentiels */
.glassmorphism-disabled .loader-essential {
  animation: icon-spin-css 2s linear infinite !important;
}

/* =========================================
   EXCLUSION DES ÉLÉMENTS DE NAVIGATION
   Les éléments de navigation ne sont jamais affectés par le mode performance
   ========================================= */

/* Préserver complètement le header */
.glassmorphism-disabled .header-liquid-glass,
.glassmorphism-disabled .header-liquid-glass * {
  position: revert !important;
  animation: revert !important;
  transition: revert !important;
  backdrop-filter: revert !important;
  -webkit-backdrop-filter: revert !important;
}

/* Préserver complètement la bottom bar */
.glassmorphism-disabled .new-mobile-bottom-bar,
.glassmorphism-disabled .new-mobile-bottom-bar *,
.glassmorphism-disabled .new-mobile-bottom-bar-container,
.glassmorphism-disabled .new-mobile-bottom-bar-container * {
  position: revert !important;
  animation: revert !important;
  transition: revert !important;
  backdrop-filter: revert !important;
  -webkit-backdrop-filter: revert !important;
}

/* Préserver complètement la sidebar */
.glassmorphism-disabled .sidebar-glass-enhanced,
.glassmorphism-disabled .sidebar-glass-enhanced * {
  position: revert !important;
  animation: revert !important;
  transition: revert !important;
  backdrop-filter: revert !important;
  -webkit-backdrop-filter: revert !important;
}

/* Préserver complètement le bouton de chat flottant */
.glassmorphism-disabled .floating-chat-button,
.glassmorphism-disabled .floating-chat-button * {
  position: revert !important;
  animation: revert !important;
  transition: revert !important;
  backdrop-filter: revert !important;
  -webkit-backdrop-filter: revert !important;
}

/* Préserver complètement le panneau outils du forgeron */
.glassmorphism-disabled .central-actions-menu,
.glassmorphism-disabled .central-actions-menu *,
.glassmorphism-disabled .central-action-button,
.glassmorphism-disabled .central-action-button * {
  position: revert !important;
  animation: revert !important;
  transition: revert !important;
  backdrop-filter: revert !important;
  -webkit-backdrop-filter: revert !important;
}

/* Préserver complètement le mobile drawer */
.glassmorphism-disabled [class*="mobile-drawer"],
.glassmorphism-disabled [class*="mobile-drawer"] * {
  position: revert !important;
  animation: revert !important;
  transition: revert !important;
  backdrop-filter: revert !important;
  -webkit-backdrop-filter: revert !important;
}

/* =========================================
   EXTENDED PERFORMANCE OPTIMIZATIONS
   For old devices like iPhone 8
   ========================================= */

/* Simplify all transitions to 150ms max - SAUF pour les éléments de navigation */
.glassmorphism-disabled *:not(.header-liquid-glass):not(.header-liquid-glass *):not(.new-mobile-bottom-bar):not(.new-mobile-bottom-bar *):not(.sidebar-glass-enhanced):not(.sidebar-glass-enhanced *):not(.floating-chat-button):not(.floating-chat-button *):not(.central-actions-menu):not(.central-actions-menu *):not([class*="mobile-drawer"]):not([class*="mobile-drawer"] *) {
  transition-duration: 150ms !important;
}

/* Remove decorative particles completely */
.glassmorphism-disabled .forge-particle,
.glassmorphism-disabled .cosmic-forge-particles,
.glassmorphism-disabled *[class*="particle"] {
  display: none !important;
}

/* Keep essential focus shadows */
.glassmorphism-disabled *:focus-visible {
  box-shadow: 0 0 0 3px rgba(24, 227, 255, 0.4) !important;
}

/* Mobile specific optimizations */
@media (max-width: 768px) {
  .glassmorphism-disabled {
    /* Force hardware acceleration */
    --webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
  }

  /* Remove all animations on mobile when in performance mode - SAUF pour les éléments de navigation */
  .glassmorphism-disabled *:not(.header-liquid-glass):not(.header-liquid-glass *):not(.new-mobile-bottom-bar):not(.new-mobile-bottom-bar *):not(.sidebar-glass-enhanced):not(.sidebar-glass-enhanced *):not(.floating-chat-button):not(.floating-chat-button *):not(.central-actions-menu):not(.central-actions-menu *):not([class*="mobile-drawer"]):not([class*="mobile-drawer"] *) {
    animation: none !important;
  }

  /* Keep only critical animations */
  .glassmorphism-disabled .loader-essential {
    animation: icon-spin-css 2s linear infinite !important;
  }

  /* Preserve navigation animations explicitly */
  .glassmorphism-disabled .header-liquid-glass::before,
  .glassmorphism-disabled .header-liquid-glass::after,
  .glassmorphism-disabled .new-mobile-bottom-bar-container::before,
  .glassmorphism-disabled .new-mobile-bottom-bar-container::after {
    animation: revert !important;
  }
}

/* =========================================
   PERFORMANCE NOTES
   ========================================= */

/*
  Mode performance activé:
  ✓ Animations du fond désactivées (économie GPU considérable)
  ✓ Particules cosmiques cachées (réduction des repaints)
  ✓ Transitions réduites au minimum (fluidité préservée)

  Préservé:
  ✓ Header, sidebar, bottom bar, boutons flottants - INTACTS
  ✓ Toutes les couleurs et identité visuelle
  ✓ Structure et layout complets
  ✓ Toutes les fonctionnalités
  ✓ États interactifs (hover, active, focus)
  ✓ Accessibilité complète
*/
