/**
 * Mobile Radical Optimizations
 * Ultra-aggressive optimizations for mobile stability
 * PRIORITY: Stability > Performance > Visual Effects
 */

/* =========================================
   MOBILE: DISABLE THREE.JS COMPLETELY
   ========================================= */
.disable-threejs canvas,
.disable-threejs .three-scene,
.disable-threejs .webgl-renderer,
.is-mobile canvas[data-engine="three.js"],
.is-mobile .Avatar3DViewer,
.is-mobile .FaceViewer3D {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  pointer-events: none !important;
}

/* =========================================
   MOBILE: DISABLE FRAMER MOTION
   ========================================= */
.disable-framer-motion [data-framer-motion],
.disable-framer-motion .motion-div,
.is-mobile [data-framer-motion],
.is-mobile .motion-div {
  animation: none !important;
  transition: none !important;
  transform: none !important;
  will-change: auto !important;
}

/* =========================================
   MOBILE: DISABLE GLASSMORPHISM
   ========================================= */
.disable-glassmorphism .glass-card,
.disable-glassmorphism .glass-card-cta,
.disable-glassmorphism .glass-button,
.disable-glassmorphism .btn-glass,
.is-mobile .glass-card,
.is-mobile .glass-card-cta,
.is-mobile .glass-button,
.is-mobile .btn-glass {
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
  background: rgba(255, 255, 255, 0.08) !important;
  border: 1px solid rgba(255, 255, 255, 0.12) !important;
}

/* Remove all pseudo-elements that cause repaints */
.is-mobile .glass-card::before,
.is-mobile .glass-card::after,
.is-mobile .glass-card-cta::before,
.is-mobile .glass-card-cta::after,
.is-mobile .btn-glass::before,
.is-mobile .btn-glass::after {
  display: none !important;
}

/* =========================================
   MOBILE: DISABLE ALL ANIMATIONS
   ========================================= */
.disable-all-animations *,
.is-low-end-mobile * {
  animation: none !important;
  transition: none !important;
  will-change: auto !important;
}

/* =========================================
   MOBILE: FORCE GPU ACCELERATION OFF
   ========================================= */
.is-mobile * {
  transform: none !important;
  -webkit-transform: none !important;
  backface-visibility: visible !important;
  -webkit-backface-visibility: visible !important;
  perspective: none !important;
  -webkit-perspective: none !important;
  transform-style: flat !important;
  -webkit-transform-style: flat !important;
}

/* Only allow GPU acceleration on specific critical elements */
.is-mobile .mobile-safe-transform {
  transform: translateZ(0) !important;
  -webkit-transform: translateZ(0) !important;
  will-change: transform !important;
}

/* =========================================
   MOBILE: DISABLE BLUR EFFECTS
   ========================================= */
.is-mobile *[style*="filter"],
.is-mobile *[style*="backdrop-filter"] {
  filter: none !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

/* =========================================
   MOBILE: DISABLE BOX SHADOWS
   ========================================= */
.is-mobile * {
  box-shadow: none !important;
  text-shadow: none !important;
}

/* Only critical shadows */
.is-mobile .critical-shadow {
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important;
}

/* =========================================
   MOBILE: SIMPLIFY LAYOUTS
   ========================================= */
.is-mobile .complex-grid {
  display: block !important;
}

.is-mobile .complex-flex {
  display: block !important;
}

/* =========================================
   MOBILE: DISABLE PARTICLES & EFFECTS
   ========================================= */
.is-mobile [class*="particle"],
.is-mobile [class*="spark"],
.is-mobile [class*="glow"],
.is-mobile [class*="shimmer"],
.is-mobile .breathing-glow,
.is-mobile .breathing-icon,
.is-mobile .spatial-icon,
.is-mobile .icon-pulse {
  display: none !important;
  visibility: hidden !important;
}

/* =========================================
   MOBILE: LIMIT CONCURRENT ANIMATIONS
   ========================================= */
.is-mobile .animation-slot-1,
.is-mobile .animation-slot-2 {
  animation-duration: 0.2s !important;
  animation-timing-function: ease-out !important;
}

.is-mobile .animation-slot-3,
.is-mobile .animation-slot-4,
.is-mobile .animation-slot-5,
.is-mobile .animation-slot-6,
.is-mobile .animation-slot-7,
.is-mobile .animation-slot-8 {
  animation: none !important;
}

/* =========================================
   MOBILE: DISABLE OVERLAYS & MODALS EFFECTS
   ========================================= */
.is-mobile .modal-overlay,
.is-mobile .drawer-overlay {
  background: rgba(0, 0, 0, 0.7) !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

/* =========================================
   MOBILE: OPTIMIZE IMAGES
   ========================================= */
.is-mobile img {
  image-rendering: auto !important;
  will-change: auto !important;
}

/* =========================================
   MOBILE: REDUCE BORDER RADIUS COMPLEXITY
   ========================================= */
.is-mobile * {
  border-radius: min(var(--radius, 8px), 12px) !important;
}

/* =========================================
   MOBILE: DISABLE HOVER EFFECTS
   ========================================= */
@media (hover: none) and (pointer: coarse) {
  * {
    transition: none !important;
  }

  *:hover {
    transform: none !important;
    scale: 1 !important;
  }
}

/* =========================================
   MOBILE: FORCE SIMPLICITY ON SPECIFIC COMPONENTS
   ========================================= */

/* Sidebar */
.is-mobile .sidebar-glass-enhanced {
  background: rgba(20, 20, 30, 0.95) !important;
  backdrop-filter: none !important;
}

/* Header */
.is-mobile .header-liquid-glass {
  background: rgba(20, 20, 30, 0.95) !important;
  backdrop-filter: none !important;
}

/* Cards */
.is-mobile .glass-card {
  background: linear-gradient(
    145deg,
    rgba(255, 255, 255, 0.06),
    rgba(255, 255, 255, 0.03)
  ) !important;
}

/* Buttons */
.is-mobile .btn-glass {
  background: linear-gradient(
    145deg,
    rgba(255, 255, 255, 0.08),
    rgba(255, 255, 255, 0.04)
  ) !important;
}

/* =========================================
   LOW-END MOBILE: EXTREME MEASURES
   ========================================= */
.is-low-end-mobile * {
  will-change: auto !important;
  contain: none !important;
  isolation: auto !important;
}

.is-low-end-mobile img {
  max-width: 100% !important;
  height: auto !important;
}

/* =========================================
   MOBILE: ENSURE CRITICAL ELEMENTS WORK
   ========================================= */
.is-mobile button,
.is-mobile a,
.is-mobile input,
.is-mobile textarea {
  cursor: pointer !important;
  -webkit-tap-highlight-color: rgba(24, 227, 255, 0.3) !important;
}

/* =========================================
   MOBILE: PREVENT SCROLL JANK
   ========================================= */
.is-mobile * {
  -webkit-overflow-scrolling: touch !important;
  overscroll-behavior: contain !important;
}

/* =========================================
   MOBILE: REDUCE PAINT AREAS
   ========================================= */
.is-mobile * {
  contain: layout style !important;
}

.is-mobile .contain-paint {
  contain: layout style paint !important;
}

/* =========================================
   MOBILE: SAFE TRANSITIONS ONLY
   ========================================= */
.is-mobile .safe-transition {
  transition: opacity 0.15s ease-out !important;
}

.is-mobile .safe-transition-transform {
  transition: transform 0.15s ease-out !important;
}

/* =========================================
   MOBILE: MEMORY OPTIMIZATION
   ========================================= */

/* Unload heavy content when not visible */
.is-mobile [aria-hidden="true"] img,
.is-mobile [aria-hidden="true"] video,
.is-mobile [aria-hidden="true"] canvas {
  display: none !important;
  visibility: hidden !important;
}

/* =========================================
   MOBILE: FONT OPTIMIZATION
   ========================================= */
.is-mobile * {
  font-smooth: never !important;
  -webkit-font-smoothing: antialiased !important;
  -moz-osx-font-smoothing: grayscale !important;
  text-rendering: optimizeSpeed !important;
}

/* =========================================
   MOBILE: FORCE LAYOUT STABILITY
   ========================================= */
.is-mobile img,
.is-mobile video {
  aspect-ratio: attr(width) / attr(height) !important;
}

/* =========================================
   MOBILE: EMERGENCY FALLBACK
   ========================================= */
.mobile-fallback-ui {
  display: none;
}

.is-mobile.emergency-mode .mobile-fallback-ui {
  display: block !important;
}

.is-mobile.emergency-mode .main-ui {
  display: none !important;
}
