import{j as e,R as $,r as F}from"./vendor-DX97-qL9.js";import{b as S,c as z,d as I,g as M}from"./page-fridge-scan-ZLPWYd6x.js";import{a as P,b as D}from"./stores-DcNfcD_j.js";import{G as N,S as d,I as c}from"./ui-components-DWjWyKd7.js";import{l as C}from"./page-fridge-BvAjnJpI.js";import{h as H,d as R,c as A,g as O,a as q,i as L,e as W,b as G,f as B,F as T}from"./FastingTipsCard-8yThwNr9.js";import{m as l}from"./motion-DLE-fuXv.js";import{f as k}from"./date-utils-sCOX3Ksr.js";import"./utils-CUtLAp28.js";import"./supabase-C_rF2iqf.js";const V=({targetHours:a,setTargetHours:i,onStartFasting:n})=>e.jsx(N,{className:"p-8 text-center",style:{background:`
          radial-gradient(circle at 30% 20%, color-mix(in srgb, #F59E0B 15%, transparent) 0%, transparent 60%),
          radial-gradient(circle at 70% 80%, color-mix(in srgb, #EF4444 12%, transparent) 0%, transparent 50%),
          var(--glass-opacity)
        `,borderColor:"color-mix(in srgb, #F59E0B 30%, transparent)",boxShadow:`
          0 20px 60px rgba(0, 0, 0, 0.4),
          0 0 40px color-mix(in srgb, #F59E0B 20%, transparent),
          0 0 80px color-mix(in srgb, #EF4444 15%, transparent),
          inset 0 2px 0 rgba(255, 255, 255, 0.2)
        `,backdropFilter:"blur(28px) saturate(170%)"},children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsx("div",{className:"w-32 h-32 rounded-full flex items-center justify-center relative",style:{background:`
                radial-gradient(circle at 30% 30%, rgba(255,255,255,0.25) 0%, transparent 60%),
                radial-gradient(circle at 70% 70%, color-mix(in srgb, #F59E0B 20%, transparent) 0%, transparent 50%),
                linear-gradient(135deg, color-mix(in srgb, #F59E0B 45%, transparent), color-mix(in srgb, #EF4444 35%, transparent))
              `,border:"4px solid color-mix(in srgb, #F59E0B 70%, transparent)",boxShadow:`
                0 0 40px color-mix(in srgb, #F59E0B 70%, transparent),
                0 0 80px color-mix(in srgb, #F59E0B 50%, transparent),
                0 0 120px color-mix(in srgb, #EF4444 40%, transparent),
                inset 0 4px 0 rgba(255,255,255,0.5),
                inset 0 -3px 0 rgba(0,0,0,0.2)
              `,backdropFilter:"blur(20px) saturate(170%)",WebkitBackdropFilter:"blur(20px) saturate(170%)",transition:"all 0.3s ease",margin:"0 auto"},children:e.jsx(d,{Icon:c.Timer,size:64,style:{color:"#F59E0B",filter:`
                  drop-shadow(0 0 16px color-mix(in srgb, #F59E0B 90%, transparent))
                  drop-shadow(0 0 32px color-mix(in srgb, #F59E0B 70%, transparent))
                  drop-shadow(0 0 48px color-mix(in srgb, #EF4444 50%, transparent))
                `},variant:"pure"})})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-3xl font-bold text-white",children:"Prêt à Jeûner"}),e.jsx("p",{className:"text-white/80 text-lg",children:"Configurez votre protocole et démarrez votre session"}),e.jsxs("div",{className:"max-w-xs mx-auto",children:[e.jsx("label",{className:"block text-white/90 text-sm font-medium mb-2",children:"Protocole de jeûne"}),e.jsxs("select",{value:a,onChange:t=>i(Number(t.target.value)),className:"glass-input w-full text-center",style:{background:"color-mix(in srgb, #F59E0B 8%, transparent)",border:"1px solid color-mix(in srgb, #F59E0B 25%, transparent)"},children:[e.jsx("option",{value:14,children:"14:10 - Débutant"}),e.jsx("option",{value:16,children:"16:8 - Classique"}),e.jsx("option",{value:18,children:"18:6 - Intermédiaire"}),e.jsx("option",{value:20,children:"20:4 - Warrior"}),e.jsx("option",{value:24,children:"24:0 - OMAD"})]})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:n,className:"px-8 py-4 text-xl font-bold rounded-full relative overflow-hidden",style:{background:`linear-gradient(135deg, 
                color-mix(in srgb, #22C55E 80%, transparent), 
                color-mix(in srgb, #10B981 60%, transparent)
              )`,border:"3px solid color-mix(in srgb, #22C55E 60%, transparent)",boxShadow:`
                0 16px 50px color-mix(in srgb, #22C55E 50%, transparent),
                0 0 80px color-mix(in srgb, #22C55E 40%, transparent),
                inset 0 4px 0 rgba(255,255,255,0.5)
              `,backdropFilter:"blur(24px) saturate(170%)",color:"#fff",transition:"all 0.2s ease"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{Icon:c.Timer,size:28,className:"text-white"}),e.jsx("span",{children:"Démarrer le Jeûne"})]})})})]})}),_=({session:a,elapsedSeconds:i,progressPercentage:n,targetHours:t,onStopFasting:r,formatElapsedTime:o})=>{S();const{showModal:m}=P(),p=()=>{const g=Math.floor(i/3600),x=Math.floor(i%3600/60),s=`${g}h ${x.toString().padStart(2,"0")}m`;m({title:"Terminer votre jeûne ?",message:`Vous avez jeûné pendant ${s}. Voulez-vous vraiment terminer votre session maintenant ?`,processName:"Fin de Jeûne",onConfirm:()=>{r()},onCancel:()=>{}})};return e.jsx(N,{className:"p-6 md:p-8",style:{background:`
          radial-gradient(circle at 30% 20%, color-mix(in srgb, #EF4444 15%, transparent) 0%, transparent 60%),
          radial-gradient(circle at 70% 80%, color-mix(in srgb, #F59E0B 12%, transparent) 0%, transparent 50%),
          var(--glass-opacity)
        `,borderColor:"color-mix(in srgb, #EF4444 30%, transparent)",boxShadow:`
          0 20px 60px rgba(0, 0, 0, 0.4),
          0 0 40px color-mix(in srgb, #EF4444 20%, transparent),
          0 0 80px color-mix(in srgb, #F59E0B 15%, transparent),
          inset 0 2px 0 rgba(255, 255, 255, 0.2)
        `,backdropFilter:"blur(28px) saturate(170%)"},children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center breathing-icon",style:{background:"linear-gradient(135deg, color-mix(in srgb, #EF4444 40%, transparent), color-mix(in srgb, #F59E0B 30%, transparent))",border:"2px solid color-mix(in srgb, #EF4444 60%, transparent)",boxShadow:"0 0 25px color-mix(in srgb, #EF4444 50%, transparent)"},children:e.jsx(d,{Icon:c.Timer,size:24,style:{color:"#EF4444"},variant:"pure"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Session Active"}),e.jsx("p",{className:"text-white/80 text-sm mt-0.5",children:"Contrôles de la session en cours"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full animate-pulse",style:{background:"#EF4444",boxShadow:"0 0 8px #EF444460"}}),e.jsx("span",{className:"text-red-300 text-sm font-medium",children:"En cours"})]})]}),e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("div",{className:"text-5xl md:text-6xl font-black text-red-400",children:o(i)}),e.jsxs("p",{className:"text-white/70 text-base",children:["Objectif : ",a?.targetHours,"h • ",n?.toFixed(1)||"0.0","% accompli"]}),e.jsx("div",{className:"max-w-md mx-auto",children:e.jsx("div",{className:"w-full bg-white/10 rounded-full h-3 overflow-hidden",children:e.jsx(l.div,{className:"h-3 rounded-full relative overflow-hidden",style:{background:"linear-gradient(90deg, #EF4444, #F59E0B)",boxShadow:"0 0 12px color-mix(in srgb, #EF4444 60%, transparent)",width:`${n||0}%`},initial:{width:0},animate:{width:`${n||0}%`},transition:{duration:.8,ease:"easeOut"},children:e.jsx("div",{className:"absolute inset-0 rounded-full",style:{background:`linear-gradient(90deg,
                      transparent 0%,
                      rgba(255,255,255,0.4) 50%,
                      transparent 100%
                    )`,animation:"progressShimmer 2s ease-in-out infinite"}})})})})]}),e.jsxs("div",{className:"p-4 rounded-xl text-center",style:{background:"color-mix(in srgb, #06B6D4 8%, transparent)",border:"1px solid color-mix(in srgb, #06B6D4 20%, transparent)"},children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx(d,{Icon:c.Info,size:16,className:"text-cyan-400"}),e.jsx("span",{className:"text-sm font-semibold text-cyan-300",children:"Suivi Détaillé"})]}),e.jsxs("p",{className:"text-white/75 text-sm leading-relaxed",children:["Pour voir les métriques détaillées de votre session (phases métaboliques, calories, bénéfices), consultez l'onglet ",e.jsx("strong",{className:"text-white",children:"Tracker"}),"."]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:p,className:"px-8 py-4 text-xl font-bold rounded-full relative overflow-hidden w-full md:w-auto",style:{background:`linear-gradient(135deg,
                color-mix(in srgb, #EF4444 80%, transparent),
                color-mix(in srgb, #F59E0B 60%, transparent)
              )`,border:"3px solid color-mix(in srgb, #EF4444 60%, transparent)",boxShadow:`
                0 16px 50px color-mix(in srgb, #EF4444 50%, transparent),
                0 0 80px color-mix(in srgb, #EF4444 40%, transparent),
                inset 0 4px 0 rgba(255,255,255,0.5)
              `,backdropFilter:"blur(24px) saturate(170%)",color:"#fff",transition:"all 0.2s ease"},children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx(d,{Icon:c.Square,size:24,className:"text-white"}),e.jsx("span",{children:"Terminer le Jeûne"})]})})})]})})},J=({session:a,sessionOutcome:i})=>{if(!a)return null;const t=(()=>{switch(i){case"success":return{primary:"#22C55E",secondary:"#10B981",background:"color-mix(in srgb, #22C55E 8%, transparent)",border:"color-mix(in srgb, #22C55E 20%, transparent)"};case"partial":return{primary:"#F59E0B",secondary:"#EF4444",background:"color-mix(in srgb, #F59E0B 8%, transparent)",border:"color-mix(in srgb, #F59E0B 20%, transparent)"};case"missed":return{primary:"#EF4444",secondary:"#F59E0B",background:"color-mix(in srgb, #EF4444 8%, transparent)",border:"color-mix(in srgb, #EF4444 20%, transparent)"}}})(),r=a.actualDurationHours?H(a.actualDurationHours):"0h 00m 00s";return e.jsx(l.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.6,delay:.3,ease:[.25,.1,.25,1]},children:e.jsxs(N,{className:"p-6",style:{background:`
            radial-gradient(circle at 30% 20%, ${t.background} 0%, transparent 60%),
            var(--glass-opacity)
          `,borderColor:t.border,boxShadow:`
            0 12px 40px rgba(0, 0, 0, 0.25),
            0 0 30px color-mix(in srgb, ${t.primary} 15%, transparent),
            inset 0 2px 0 rgba(255, 255, 255, 0.15)
          `,backdropFilter:"blur(20px) saturate(160%)"},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center",style:{background:`
                radial-gradient(circle at 30% 30%, rgba(255,255,255,0.2) 0%, transparent 60%),
                linear-gradient(135deg, color-mix(in srgb, ${t.primary} 35%, transparent), color-mix(in srgb, ${t.primary} 25%, transparent))
              `,border:`2px solid color-mix(in srgb, ${t.primary} 50%, transparent)`,boxShadow:`0 0 20px color-mix(in srgb, ${t.primary} 30%, transparent)`},children:e.jsx(d,{Icon:c.BarChart3,size:20,style:{color:t.primary}})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-bold text-xl",children:"Résumé de Session"}),e.jsx("p",{className:"text-white/70 text-sm",children:"Détails de votre forge temporelle"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs(l.div,{className:"text-center p-4 rounded-xl",style:{background:`color-mix(in srgb, ${t.primary} 10%, transparent)`,border:`1px solid color-mix(in srgb, ${t.primary} 20%, transparent)`},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.5},children:[e.jsx("div",{className:"text-2xl font-bold text-white mb-1",children:r}),e.jsx("div",{className:"text-white/70 text-sm font-medium",children:"Durée Réelle"})]}),e.jsxs(l.div,{className:"text-center p-4 rounded-xl",style:{background:`color-mix(in srgb, ${t.secondary} 10%, transparent)`,border:`1px solid color-mix(in srgb, ${t.secondary} 20%, transparent)`},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.6},children:[e.jsxs("div",{className:"text-2xl font-bold text-white mb-1",children:[a.targetHours,"h"]}),e.jsx("div",{className:"text-white/70 text-sm font-medium",children:"Objectif"})]}),e.jsxs(l.div,{className:"text-center p-4 rounded-xl bg-white/5 border border-white/10",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.7},children:[e.jsx("div",{className:"text-lg font-bold text-white mb-1",children:a.protocol}),e.jsx("div",{className:"text-white/70 text-sm font-medium",children:"Protocole"})]}),e.jsxs(l.div,{className:"text-center p-4 rounded-xl bg-white/5 border border-white/10",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.8},children:[e.jsxs("div",{className:"text-lg font-bold text-white mb-1",children:[a.actualDurationHours&&a.targetHours?Math.round(a.actualDurationHours/a.targetHours*100):0,"%"]}),e.jsx("div",{className:"text-white/70 text-sm font-medium",children:"Progression"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(d,{Icon:c.Clock,size:14,className:"text-white/70"}),e.jsx("span",{className:"text-white/70 text-sm font-medium",children:"Début"})]}),e.jsx("div",{className:"text-white font-bold text-lg",children:a.startTime?k(a.startTime,"HH:mm"):"--:--"}),e.jsx("div",{className:"text-white/60 text-xs mt-1",children:a.startTime?k(a.startTime,"dd/MM/yyyy"):"--/--/----"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-white/5 border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(d,{Icon:c.Clock,size:14,className:"text-white/70"}),e.jsx("span",{className:"text-white/70 text-sm font-medium",children:"Fin"})]}),e.jsx("div",{className:"text-white font-bold text-lg",children:a.endTime?k(a.endTime,"HH:mm"):"--:--"}),e.jsx("div",{className:"text-white/60 text-xs mt-1",children:a.endTime?k(a.endTime,"dd/MM/yyyy"):"--/--/----"})]})]})]})})},U=({session:a,sessionOutcome:i})=>{if(!a)return null;const t=(()=>{const r=a.actualDurationHours&&a.targetHours?Math.round(a.actualDurationHours/a.targetHours*100):0;switch(i){case"success":return{color:"#22C55E",icon:"Check",title:"Objectif Atteint !",message:"Félicitations ! Vous avez accompli votre forge temporelle avec brio. Votre discipline et votre persévérance portent leurs fruits.",achievements:["Objectif de jeûne complètement atteint","Discipline temporelle renforcée","Bénéfices métaboliques optimaux","Progression vers vos objectifs de bien-être"],nextSteps:["Maintenez cette régularité","Considérez augmenter progressivement la durée","Hydratez-vous bien après le jeûne"]};case"partial":return{color:"#F59E0B",icon:"Target",title:"Bonne Progression !",message:`Vous avez accompli ${r}% de votre objectif. C'est un excellent début ! La régularité est plus importante que la perfection.`,achievements:["Session de jeûne initiée avec succès","Première expérience de la forge temporelle","Discipline en développement","Base solide pour les prochaines sessions"],nextSteps:["Réessayez avec le même protocole","Préparez-vous mentalement avant de commencer","Restez hydraté pendant le jeûne"]};case"missed":return{color:"#EF4444",icon:"Heart",title:"Chaque Effort Compte",message:`Votre session s'est arrêtée à ${r}% de l'objectif. C'est normal ! Le jeûne intermittent demande de la pratique et de l'adaptation.`,achievements:["Courage d'essayer le jeûne intermittent","Première approche de la discipline temporelle","Expérience acquise pour les prochaines fois","Écoute de votre corps et de ses besoins"],nextSteps:["Commencez par un protocole plus court","Préparez votre environnement avant de jeûner","Consultez les conseils de jeûne","Réessayez quand vous vous sentez prêt"]}}})();return e.jsx(l.div,{initial:{opacity:0,y:30,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.8,delay:.6,ease:[.25,.1,.25,1]},children:e.jsxs(N,{className:"p-6",style:{background:`
            radial-gradient(circle at 30% 20%, color-mix(in srgb, ${t.color} 12%, transparent) 0%, transparent 60%),
            radial-gradient(circle at 70% 80%, color-mix(in srgb, ${t.color} 8%, transparent) 0%, transparent 50%),
            var(--glass-opacity)
          `,borderColor:`color-mix(in srgb, ${t.color} 25%, transparent)`,boxShadow:`
            0 12px 40px rgba(0, 0, 0, 0.25),
            0 0 30px color-mix(in srgb, ${t.color} 20%, transparent),
            inset 0 2px 0 rgba(255, 255, 255, 0.15)
          `,backdropFilter:"blur(20px) saturate(160%)"},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(l.div,{className:"w-12 h-12 rounded-full flex items-center justify-center",style:{background:`
                radial-gradient(circle at 30% 30%, rgba(255,255,255,0.2) 0%, transparent 60%),
                linear-gradient(135deg, color-mix(in srgb, ${t.color} 35%, transparent), color-mix(in srgb, ${t.color} 25%, transparent))
              `,border:`2px solid color-mix(in srgb, ${t.color} 50%, transparent)`,boxShadow:`0 0 20px color-mix(in srgb, ${t.color} 30%, transparent)`},initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{duration:.6,delay:.8,type:"spring",stiffness:200,damping:15},children:e.jsx(d,{Icon:c[t.icon],size:20,style:{color:t.color}})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-bold text-xl",children:t.title}),e.jsx("p",{className:"text-white/70 text-sm",children:"Accomplissements de votre forge"})]})]}),e.jsx(l.div,{className:"mb-6 p-4 rounded-xl",style:{background:`color-mix(in srgb, ${t.color} 6%, transparent)`,border:`1px solid color-mix(in srgb, ${t.color} 15%, transparent)`},initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:1},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(d,{Icon:c.Lightbulb,size:16,style:{color:t.color},className:"mt-0.5"}),e.jsx("p",{className:"text-white/85 text-sm leading-relaxed",children:t.message})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-white font-semibold mb-3 flex items-center gap-2",children:[e.jsx(d,{Icon:c.Check,size:16,style:{color:t.color}}),"Accomplissements"]}),e.jsx("div",{className:"space-y-2",children:t.achievements.map((r,o)=>e.jsxs(l.div,{className:"flex items-center gap-3 p-3 rounded-lg",style:{background:`color-mix(in srgb, ${t.color} 4%, transparent)`,border:`1px solid color-mix(in srgb, ${t.color} 12%, transparent)`},initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.4,delay:1.2+o*.1},children:[e.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{background:t.color}}),e.jsx("span",{className:"text-white/80 text-sm",children:r})]},o))})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-white font-semibold mb-3 flex items-center gap-2",children:[e.jsx(d,{Icon:c.Target,size:16,style:{color:t.color}}),"Prochaines Étapes"]}),e.jsx("div",{className:"space-y-2",children:t.nextSteps.map((r,o)=>e.jsxs(l.div,{className:"flex items-center gap-3 p-3 rounded-lg bg-white/5 border border-white/10",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.4,delay:1.6+o*.1},children:[e.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0",style:{background:`color-mix(in srgb, ${t.color} 15%, transparent)`,border:`1px solid color-mix(in srgb, ${t.color} 25%, transparent)`},children:e.jsx("span",{className:"text-xs font-bold",style:{color:t.color},children:o+1})}),e.jsx("span",{className:"text-white/80 text-sm",children:r})]},o))})]})]})})},K=({session:a,targetHours:i,onSaveFastingSession:n})=>{const t=a?.actualDurationHours?R(a.actualDurationHours,a.targetHours||i):"missed",r=A(t),o=a?.actualDurationHours?H(a.actualDurationHours):"0h 00m 00s";return e.jsxs("div",{className:"space-y-6",children:[e.jsx(l.div,{initial:{opacity:0,y:40,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{duration:.8,ease:[.25,.1,.25,1],type:"spring",stiffness:200,damping:20},children:e.jsx(N,{className:"p-8 text-center",style:{background:`
              radial-gradient(circle at 30% 20%, color-mix(in srgb, ${r.primaryColor} 15%, transparent) 0%, transparent 60%),
              radial-gradient(circle at 70% 80%, color-mix(in srgb, ${r.secondaryColor} 12%, transparent) 0%, transparent 50%),
              var(--glass-opacity)
            `,borderColor:`color-mix(in srgb, ${r.primaryColor} 30%, transparent)`,boxShadow:`
              0 20px 60px rgba(0, 0, 0, 0.4),
              0 0 40px color-mix(in srgb, ${r.primaryColor} 20%, transparent),
              0 0 80px color-mix(in srgb, ${r.secondaryColor} 15%, transparent),
              inset 0 2px 0 rgba(255, 255, 255, 0.2)
            `,backdropFilter:"blur(28px) saturate(170%)"},children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsxs(l.div,{className:"w-32 h-32 rounded-full flex items-center justify-center relative",style:{background:`
                    radial-gradient(circle at 30% 30%, rgba(255,255,255,0.25) 0%, transparent 60%),
                    radial-gradient(circle at 70% 70%, color-mix(in srgb, ${r.primaryColor} 20%, transparent) 0%, transparent 50%),
                    linear-gradient(135deg, color-mix(in srgb, ${r.primaryColor} 45%, transparent), color-mix(in srgb, ${r.secondaryColor} 35%, transparent))
                  `,border:`4px solid color-mix(in srgb, ${r.primaryColor} 70%, transparent)`,boxShadow:`
                    0 0 60px color-mix(in srgb, ${r.primaryColor} 70%, transparent),
                    0 0 100px color-mix(in srgb, ${r.primaryColor} 50%, transparent),
                    0 0 140px color-mix(in srgb, ${r.secondaryColor} 40%, transparent),
                    inset 0 4px 0 rgba(255,255,255,0.5),
                    inset 0 -3px 0 rgba(0,0,0,0.2)
                  `,backdropFilter:"blur(20px) saturate(170%)",WebkitBackdropFilter:"blur(20px) saturate(170%)",margin:"0 auto"},initial:{scale:0,rotate:-90},animate:{scale:1,rotate:0},transition:{duration:.8,delay:.2,type:"spring",stiffness:150,damping:12},children:[e.jsx(l.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5,delay:.6},children:e.jsx(d,{Icon:c[r.icon],size:64,style:{color:r.primaryColor,filter:`
                        drop-shadow(0 0 16px color-mix(in srgb, ${r.primaryColor} 90%, transparent))
                        drop-shadow(0 0 32px color-mix(in srgb, ${r.primaryColor} 70%, transparent))
                        drop-shadow(0 0 48px color-mix(in srgb, ${r.secondaryColor} 50%, transparent))
                      `},variant:"pure"})}),t==="success"&&e.jsxs(e.Fragment,{children:[e.jsx(l.div,{className:"absolute inset-0 rounded-full border-2",style:{borderColor:`color-mix(in srgb, ${r.primaryColor} 50%, transparent)`},initial:{scale:1,opacity:0},animate:{scale:1.5,opacity:0},transition:{duration:2,delay:1,repeat:1/0,ease:"easeOut"}}),e.jsx(l.div,{className:"absolute inset-0 rounded-full border-2",style:{borderColor:`color-mix(in srgb, ${r.secondaryColor} 40%, transparent)`},initial:{scale:1,opacity:0},animate:{scale:1.8,opacity:0},transition:{duration:2.5,delay:1.5,repeat:1/0,ease:"easeOut"}})]})]})}),e.jsxs(l.div,{className:"space-y-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:[e.jsx(l.h2,{className:"text-3xl font-bold text-white",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.5},children:r.title}),e.jsx(l.p,{className:"text-white/80 text-lg",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.6},children:r.subtitle}),e.jsx(l.div,{className:"text-4xl font-black",style:{color:r.primaryColor},initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.7,type:"spring",stiffness:200,damping:15},children:o}),e.jsx(l.p,{className:"text-white/70 text-base",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.8},children:"Durée réelle de votre jeûne"})]}),e.jsx(l.div,{className:"flex justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.9},children:e.jsx("button",{onClick:n,className:"px-8 py-4 text-xl font-bold rounded-full relative overflow-hidden",style:{background:`linear-gradient(135deg, 
                    color-mix(in srgb, #3B82F6 80%, transparent), 
                    color-mix(in srgb, #06B6D4 60%, transparent)
                  )`,border:"3px solid color-mix(in srgb, #3B82F6 60%, transparent)",boxShadow:`
                    0 16px 50px color-mix(in srgb, #3B82F6 50%, transparent),
                    0 0 80px color-mix(in srgb, #3B82F6 40%, transparent),
                    inset 0 4px 0 rgba(255,255,255,0.5)
                  `,backdropFilter:"blur(24px) saturate(170%)",color:"#fff",transition:"all 0.2s ease"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{Icon:c.Save,size:28,className:"text-white"}),e.jsx("span",{children:"Sauvegarder"})]})})})]})})}),e.jsx(J,{session:a,sessionOutcome:t}),e.jsx(U,{session:a,sessionOutcome:t})]})},Q=({elapsedSeconds:a,targetHours:i,userWeight:n=70})=>{const t=a/3600,r=O(t),o=q(t,r),m=L(r),p=W(r,t,n),g=G(r),s=(()=>{if(!m)return"";const[,j]=r.durationRange,b=j-t;if(b<=0)return"";const w=Math.floor(b),h=Math.floor((b-w)*60);return`${w}h ${h}m`})();return e.jsx(N,{className:"p-6",style:{background:`
          radial-gradient(circle at 30% 20%, color-mix(in srgb, ${r.color} 12%, transparent) 0%, transparent 60%),
          radial-gradient(circle at 70% 80%, color-mix(in srgb, ${r.color} 8%, transparent) 0%, transparent 50%),
          var(--glass-opacity)
        `,borderColor:`color-mix(in srgb, ${r.color} 30%, transparent)`,boxShadow:`
          0 12px 40px rgba(0, 0, 0, 0.25),
          0 0 30px color-mix(in srgb, ${r.color} 20%, transparent),
          inset 0 2px 0 rgba(255, 255, 255, 0.15)
        `,backdropFilter:"blur(20px) saturate(160%)"},children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center breathing-icon",style:{background:`
                  radial-gradient(circle at 30% 30%, rgba(255,255,255,0.2) 0%, transparent 60%),
                  linear-gradient(135deg, color-mix(in srgb, ${r.color} 40%, transparent), color-mix(in srgb, ${r.color} 30%, transparent))
                `,border:`2px solid color-mix(in srgb, ${r.color} 60%, transparent)`,boxShadow:`0 0 25px color-mix(in srgb, ${r.color} 50%, transparent)`},children:e.jsx(d,{Icon:c[r.icon],size:20,style:{color:r.color},variant:"pure"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-bold text-xl",children:r.name}),e.jsx("p",{className:"text-white/70 text-sm",children:r.metabolicState})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{background:r.color,boxShadow:`0 0 8px ${r.color}60`}}),e.jsxs("span",{className:"text-white font-bold text-lg",children:[Math.round(o),"%"]})]}),e.jsx("div",{className:"text-white/60 text-xs",children:"Phase Active"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-white/85 text-base leading-relaxed",children:r.description}),e.jsxs("div",{className:"p-4 rounded-xl",style:{background:`color-mix(in srgb, ${r.color} 8%, transparent)`,border:`1px solid color-mix(in srgb, ${r.color} 20%, transparent)`},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(d,{Icon:c.Heart,size:14,style:{color:r.color}}),e.jsx("span",{className:"text-sm font-semibold",style:{color:r.color},children:"Message de la Forge"})]}),e.jsx("p",{className:"text-white/80 text-sm leading-relaxed",children:g})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 rounded-xl",style:{background:"color-mix(in srgb, #EF4444 10%, transparent)",border:"1px solid color-mix(in srgb, #EF4444 20%, transparent)"},children:[e.jsx("div",{className:"text-2xl font-bold text-red-400 mb-1",children:p}),e.jsx("div",{className:"text-red-300 text-sm font-medium",children:"Calories"}),e.jsx("div",{className:"text-white/50 text-xs mt-1",children:"Brûlées"})]}),e.jsxs("div",{className:"text-center p-4 rounded-xl",style:{background:`color-mix(in srgb, ${r.color} 10%, transparent)`,border:`1px solid color-mix(in srgb, ${r.color} 20%, transparent)`},children:[e.jsx("div",{className:"text-lg font-bold text-white mb-1",children:r.caloriesBurnRate==="low"?"🔥":r.caloriesBurnRate==="medium"?"🔥🔥":r.caloriesBurnRate==="high"?"🔥🔥🔥":"🔥🔥🔥🔥"}),e.jsx("div",{className:"text-sm font-medium",style:{color:r.color},children:r.caloriesBurnRate==="low"?"Faible":r.caloriesBurnRate==="medium"?"Modéré":r.caloriesBurnRate==="high"?"Élevé":"Maximal"}),e.jsx("div",{className:"text-white/50 text-xs mt-1",children:"Taux"})]}),m&&s&&e.jsxs("div",{className:"text-center p-4 rounded-xl",style:{background:`color-mix(in srgb, ${m.color} 10%, transparent)`,border:`1px solid color-mix(in srgb, ${m.color} 20%, transparent)`},children:[e.jsx("div",{className:"text-lg font-bold text-white mb-1",children:s}),e.jsx("div",{className:"text-sm font-medium",style:{color:m.color},children:"Prochaine Phase"}),e.jsx("div",{className:"text-white/50 text-xs mt-1",children:m.name})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-white font-semibold mb-3 flex items-center gap-2",children:[e.jsx(d,{Icon:c.Check,size:16,style:{color:r.color}}),"Bénéfices Actuels"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:r.benefits.map((j,b)=>e.jsxs(l.div,{className:"flex items-center gap-2 p-2 rounded-lg",style:{background:`color-mix(in srgb, ${r.color} 6%, transparent)`,border:`1px solid color-mix(in srgb, ${r.color} 15%, transparent)`},initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.4,delay:b*.1},children:[e.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{background:r.color}}),e.jsx("span",{className:"text-white/80 text-sm",children:j})]},b))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm text-white/70 mb-2",children:[e.jsxs("span",{children:["Progression dans ",r.name]}),e.jsxs("span",{children:[Math.round(o),"%"]})]}),e.jsx("div",{className:"w-full bg-white/10 rounded-full h-2 overflow-hidden",children:e.jsx(l.div,{className:"h-2 rounded-full relative overflow-hidden",style:{background:`linear-gradient(90deg, ${r.color}, color-mix(in srgb, ${r.color} 80%, white))`,boxShadow:`0 0 8px color-mix(in srgb, ${r.color} 60%, transparent)`,width:`${o}%`},initial:{width:0},animate:{width:`${o}%`},transition:{duration:.8,ease:"easeOut"},children:e.jsx("div",{className:"absolute inset-0 rounded-full",style:{background:`linear-gradient(90deg, 
                    transparent 0%, 
                    rgba(255,255,255,0.4) 50%, 
                    transparent 100%
                  )`,animation:"progressShimmer 2s ease-in-out infinite"}})})})]})]})})};function X(a=768){const[i,n]=$.useState(!1);return $.useEffect(()=>{if(typeof window>"u")return;const t=window.matchMedia(`(max-width: ${a}px)`),r=o=>n(("matches"in o,o.matches));return r(t),"addEventListener"in t?t.addEventListener("change",r):t.addListener(r),()=>{"removeEventListener"in t?t.removeEventListener("change",r):t.removeListener(r)}},[a]),i}const Y=({isActive:a,currentStep:i,overallProgress:n,message:t,subMessage:r,steps:o,elapsedTime:m,targetHours:p})=>{const g=X(),x=F.useRef(null);S(),z(),I();const s={primary:"#F59E0B",secondary:"#EF4444"},j=g?"3.5rem":"4.25rem",b=g?26:36;$.useEffect(()=>{n!=null&&(!Number.isFinite(n)||Number.isNaN(n))&&C.error("FASTING_PROGRESS_HEADER","Invalid progress detected",{progress:n,progressType:typeof n,currentStep:i})},[n,i]);const w=F.useMemo(()=>o.find(u=>u.id===i)||{id:i,title:t||"Forge en cours",subtitle:r||"",icon:"Timer",color:s.primary},[o,i,t,r]),h=F.useMemo(()=>{const u=o.findIndex(v=>v.id===i);return u>=0?u:0},[o,i]),y=Number.isFinite(n)&&!Number.isNaN(n)?Math.max(0,Math.min(100,n)):0;return $.useEffect(()=>{const u=Number.isFinite(y)?Math.max(0,Math.min(100,y)):0,v={step:i,progress:Math.floor(u/5)*5},f=x.current;(!f||f.step!==v.step||f.progress!==v.progress)&&(x.current=v,C.info("FASTING_PROGRESS_HEADER","Forge progress update",{currentStep:i,phaseProgress:u,overallProgress:n,message:t,subMessage:r,stepIndex:h,totalSteps:o.length,elapsedTime:m,targetHours:p}))},[i,y,n,t,r,o.length,h,m,p]),a?e.jsx("div",{className:"w-full orbe-entrance-animation mt-2 md:mt-2",children:e.jsx(N,{className:"fasting-progress-container relative overflow-visible p-3 md:p-4 lg:p-5 w-full",style:{background:`
            radial-gradient(circle at 30% 20%, color-mix(in srgb, ${s.primary} 15%, transparent) 0%, transparent 60%),
            radial-gradient(circle at 70% 80%, color-mix(in srgb, ${s.secondary} 12%, transparent) 0%, transparent 50%),
            linear-gradient(145deg, rgba(255,255,255,0.12), rgba(255,255,255,0.08)),
            rgba(11, 14, 23, 0.75)
          `,borderColor:`color-mix(in srgb, ${s.primary} 35%, transparent)`,boxShadow:`
            0 20px 60px rgba(0, 0, 0, 0.4),
            0 0 40px color-mix(in srgb, ${s.primary} 20%, transparent),
            0 0 80px color-mix(in srgb, ${s.secondary} 18%, transparent),
            inset 0 2px 0 rgba(255, 255, 255, 0.25),
            inset 0 -2px 0 rgba(0, 0, 0, 0.15)
          `,backdropFilter:"blur(28px) saturate(170%)",WebkitBackdropFilter:"blur(28px) saturate(170%)"},children:e.jsxs("div",{className:"relative z-10 flex items-center gap-3 md:gap-3",children:[e.jsx("div",{className:"relative flex-shrink-0",style:{width:"fit-content"},children:e.jsx("div",{className:"relative rounded-full flex items-center justify-center breathing-icon",style:{width:j,height:j,background:`
                  radial-gradient(circle at 30% 30%, rgba(255,255,255,0.25) 0%, transparent 60%),
                  radial-gradient(circle at 70% 70%, color-mix(in srgb, ${s.primary} 20%, transparent) 0%, transparent 50%),
                  linear-gradient(135deg, color-mix(in srgb, ${s.primary} 45%, transparent), color-mix(in srgb, ${s.secondary} 35%, transparent))
                `,border:`3px solid color-mix(in srgb, ${s.primary} 70%, transparent)`,boxShadow:`
                  0 0 ${g?"24px":"36px"} color-mix(in srgb, ${s.primary} 60%, transparent),
                  0 0 ${g?"40px":"64px"} color-mix(in srgb, ${s.primary} 40%, transparent),
                  inset 0 3px 0 rgba(255,255,255,0.4),
                  inset 0 -2px 0 rgba(0,0,0,0.2)
                `,backdropFilter:"blur(18px) saturate(160%)",WebkitBackdropFilter:"blur(18px) saturate(160%)"},children:e.jsx(d,{Icon:c[w?.icon]||c.Timer,size:b,style:{color:s.primary,filter:`
                    drop-shadow(0 0 8px color-mix(in srgb, ${s.primary} 80%, transparent))
                    drop-shadow(0 0 16px color-mix(in srgb, ${s.primary} 60%, transparent))
                  `},glowColor:s.primary,variant:"pure","aria-hidden":!0})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"space-y-[6px] md:space-y-2",children:[e.jsx("h2",{className:"font-bold leading-tight text-left",style:{fontSize:g?18:20,color:"var(--text-primary)",letterSpacing:"-0.01em",textShadow:`0 0 6px color-mix(in srgb, ${s.primary} 14%, transparent)`},children:t}),r?e.jsx("p",{className:"text-xs md:text-sm font-medium leading-snug text-left",style:{color:"var(--text-muted)"},children:r}):null,m&&e.jsxs("p",{className:"text-xs md:text-sm font-bold text-left",style:{color:s.primary},children:[m," ",p&&`/ ${p}h`]})]}),e.jsxs("div",{className:"mt-1.5 flex items-center gap-2 flex-wrap",children:[e.jsx("div",{className:"flex items-center gap-1.5 md:gap-2 flex-1 min-w-[120px]",children:o.map((u,v)=>{const f=u.id===i,E=v<h;return e.jsx("div",{className:"fasting-step-pill",style:{height:g?"6px":"8px",borderRadius:"999px",flex:"1",background:f?s.primary:E?s.secondary:`color-mix(in srgb, ${s.primary} 35%, transparent)`,border:f?`2px solid color-mix(in srgb, ${s.primary} 80%, transparent)`:E?`2px solid color-mix(in srgb, ${s.secondary} 70%, transparent)`:`1px solid color-mix(in srgb, ${s.primary} 50%, transparent)`,position:"relative",transition:"all 220ms cubic-bezier(0.2, 0.8, 0.2, 1)",boxShadow:f?`0 0 10px color-mix(in srgb, ${s.primary} 55%, transparent)`:E?`0 0 9px color-mix(in srgb, ${s.secondary} 45%, transparent)`:"none"}},u.id)})}),e.jsxs("div",{className:"text-right font-bold md:hidden",style:{color:s.primary,fontSize:14},children:[Math.round(y),"%"]}),e.jsxs("div",{className:"hidden md:block text-xs font-medium",style:{color:"var(--text-muted)",whiteSpace:"nowrap"},children:["Forge ",h+1," / ",o.length]})]}),e.jsxs("div",{className:"mt-1 block md:hidden text-xs font-medium",style:{color:"var(--text-muted)"},children:["Forge ",h+1," / ",o.length]})]}),e.jsxs("div",{className:"relative flex-shrink-0 hidden md:flex",style:{width:"52px",height:"52px"},"aria-hidden":!0,children:[e.jsx("div",{className:"absolute inset-0 rounded-full",style:{background:`conic-gradient(from -90deg,
                  ${s.primary} 0%,
                  ${s.primary} ${y*3.6}deg,
                  color-mix(in srgb, ${s.secondary} 40%, transparent) ${y*3.6}deg,
                  color-mix(in srgb, ${s.secondary} 40%, transparent) 360deg
                )`,mask:"radial-gradient(circle at center, transparent 70%, black 75%, black 100%)",WebkitMask:"radial-gradient(circle at center, transparent 70%, black 75%, black 100%)",boxShadow:`0 0 18px color-mix(in srgb, ${s.primary} 48%, transparent), 0 0 36px color-mix(in srgb, ${s.primary} 28%, transparent)`}}),e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",style:{color:s.primary,fontSize:15,fontWeight:800},children:[Math.round(y),"%"]})]})]})})}):null},Z=$.memo(Y),de=()=>{const a=M(),{currentStep:i,session:n,steps:t,actions:r}=a,{profile:o,session:m}=D();S();const p=z(),g=I(),[x,s]=F.useState(()=>n?.targetHours||16);F.useEffect(()=>{const y=setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"});const u=document.getElementById("main-content");u&&u.scrollTo({top:0,behavior:"smooth"}),document.querySelectorAll("[data-scroll-container]").forEach(f=>{f.scrollTo({top:0,behavior:"smooth"})})},150);return C.debug("FASTING_INPUT_PAGE","Auto-scroll triggered on step change",{currentStep:i,timestamp:new Date().toISOString()}),()=>clearTimeout(y)},[i]);const j=()=>{const h=`${x}:${24-x}`;r.startFasting(x,h)},b=()=>{r.stopFasting()},w=()=>{switch(i){case"setup":return e.jsx(V,{targetHours:x,setTargetHours:s,onStartFasting:j});case"active":return e.jsxs("div",{className:"space-y-6",children:[e.jsx(_,{session:n,elapsedSeconds:p,progressPercentage:g,targetHours:x,onStopFasting:b,formatElapsedTime:B}),e.jsx(Q,{elapsedSeconds:p,targetHours:n?.targetHours||x,userWeight:o?.weight_kg}),e.jsx(T,{})]});case"completion":return e.jsx(K,{session:n,targetHours:x,onSaveFastingSession:r.saveFastingSession});default:return null}};return e.jsxs("div",{className:"space-y-6 w-full",children:[e.jsx(Z,{isActive:!0,currentStep:i,overallProgress:g,message:i==="setup"?"Configuration Temporelle":i==="active"?"Session de Jeûne Active":"Forge du Temps Accomplie",subMessage:i==="setup"?"Sélectionnez votre protocole et démarrez votre session de jeûne":i==="active"?"Votre jeûne progresse selon le protocole sélectionné":"Votre session de jeûne a été complétée avec succès",steps:t,elapsedTime:i==="active"?B(p):void 0,targetHours:n?.targetHours||x,elapsedSeconds:p}),e.jsx("div",{className:"fasting-stage-container",children:w()}),i==="setup"&&e.jsx("div",{className:"mt-6",children:e.jsx(T,{targetHours:x})})]})};export{de as default};
