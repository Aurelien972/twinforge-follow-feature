# Detailed Documentation: Body Forge - Face Scan Pipeline

**Version:** 1.0 ‚Ä¢ **Status:** Functional and production-ready ‚Ä¢ **Last update:** January 2025

The Face Scan Pipeline is TwinForge's facial scanning system, allowing users to capture their facial features through photos and generate a photorealistic 3D face model with detailed morphological analysis and personalized insights.

---

## üìã Table of Contents

- [Overview](#overview)
- [Technical Architecture](#technical-architecture)
- [Detailed User Pipeline](#detailed-user-pipeline)
- [Face Forge Tabs](#face-forge-tabs)
- [User Profile Integration](#user-profile-integration)
- [Data Generated by Spatial Forge](#data-generated-by-spatial-forge)
- [TypeScript Contracts](#typescript-contracts)
- [Detailed Edge Functions](#detailed-edge-functions)
- [Optimizations and Performance](#optimizations-and-performance)
- [Costs and Governance](#costs-and-governance)
- [Observability and Debugging](#observability-and-debugging)
- [Future Integration with Central Brain](#future-integration-with-central-brain)

---

## üéØ Overview

### Objective
Allow users to scan their face through photos, obtain detailed facial morphological analysis, and generate a photorealistic 3D face model with personalized insights for facial feature optimization and wellness tracking.

### Added Value
- **Intuitive capture:** Simple photo taking (front and profile) to analyze facial morphology
- **Advanced AI analysis:** Facial feature detection, morphological classification, and 3D face model generation
- **Personalized insights:** Recommendations adapted to the user's facial structure and wellness goals
- **3D visualization:** Interactive face model with real-time morphological adjustments
- **Wellness tracking:** Facial indicators of health, stress, and overall wellness

### Role in TwinForge Ecosystem
The Face Forge generates comprehensive facial morphological data that feeds the future "Central Brain" for holistic advice combining facial wellness indicators, stress analysis, sleep quality assessment, and overall health optimization.

---

## üèóÔ∏è Technical Architecture

### Technical Stack
- **Frontend:** React 18 + TypeScript + Three.js + React Three Fiber
- **3D Rendering:** WebGL with specialized facial shaders and materials
- **State Management:** Zustand + React Query (with cache persistence)
- **Backend:** Supabase Edge Functions (Deno)
- **Spatial Forge:** OpenAI GPT-5 Vision + specialized facial analysis models
- **Database:** PostgreSQL with RLS and vector storage for facial embeddings

### Data Flow
```
User (2 Photos: Front + Profile Face)
    ‚Üì
Frontend (Capture + Pre-processing)
    ‚Üì
Edge Function: face-match (GPT-5 Vision)
    ‚Üì
Edge Function: face-semantic (Facial Classification)
    ‚Üì
Edge Function: face-refine-morphs (AI Refinement)
    ‚Üì
Edge Function: face-commit (Face Model Generation + Persistence)
    ‚Üì
Database (user_face_profiles, face_semantic tables)
    ‚Üì
Frontend (3D Face Model + Insights Visualization)
```

---

## üîÑ Detailed User Pipeline

### 1. Face Scan Capture (`FaceScanPhotoCaptureStep`)

**Objective:** Collect the user's facial photos (front and profile views) with optimal lighting and positioning.

**Input modes:**
- **Camera:** Direct capture via mobile/desktop camera with guided facial positioning
- **Gallery:** Selection of existing facial images from gallery

**Frontend Components:**
- `src/app/pages/FaceScan/FaceScanPhotoCaptureStep.tsx` (Photo capture step)
- `src/app/pages/FaceScan/components/FaceScanImmersiveAnalysis.tsx` (Immersive analysis interface)
- `src/app/pages/FaceScan/components/ImmersiveFaceAnalysis.tsx` (Face analysis visualization)

**Data Collected:**
- **Front Face Photo:** Clear frontal facial view (JPEG/PNG) converted to Base64 for AI
- **Profile Face Photo:** Clear side facial view (JPEG/PNG) converted to Base64 for AI
- **Metadata:** `userId`, `clientScanId`, timestamp, facial photo quality metrics

**Validations:**
- File format (image), maximum size (8MB per photo)
- Face visibility and clarity validation (handled by AI in face-match)
- Lighting and positioning assessment for optimal analysis

### 2. Face Scan Processing (`FaceScanAnalysisStep`)

**Objective:** Process the facial photos through the complete AI pipeline to generate facial morphological data.

**Frontend Components:**
- `src/app/pages/FaceScan/components/FaceScanImmersiveAnalysis.tsx` (Processing visualization)

**Backend Process:**

#### Phase 1: Face Matching (`face-match`)
- **Edge Function:** `face-match`
- **Model:** OpenAI GPT-5 Vision
- **Duration:** ~5-20 seconds
- **Output:** Facial feature detection, initial morphological parameters, quality assessment

#### Phase 2: Semantic Analysis (`face-semantic`)
- **Edge Function:** `face-semantic`
- **Model:** GPT-5 Mini + specialized facial morphological models
- **Duration:** ~3-12 seconds
- **Output:** Face shape classification, feature categorization, facial symmetry analysis

#### Phase 3: Morphological Refinement (`face-refine-morphs`)
- **Edge Function:** `face-refine-morphs`
- **Model:** GPT-5 Mini with specialized facial prompts
- **Duration:** ~8-25 seconds
- **Output:** Refined facial parameters, enhanced accuracy, detailed feature analysis

#### Phase 4: Face Commitment (`face-commit`)
- **Edge Function:** `face-commit`
- **Model:** 3D facial processing algorithms + profile integration
- **Duration:** ~3-10 seconds
- **Output:** Final 3D face model data, database persistence, profile updates

### 3. Results Review (`FaceScanReviewPage`)

**Objective:** Display facial scan results, allow morphological adjustments, and save the face model.

**Frontend Components:**
- `src/app/pages/FaceScan/FaceScanReviewPage.tsx` (Main review page)
- Interactive 3D face viewer with morphological controls
- Facial measurements and feature analysis display
- Personalized facial wellness insights

**Features:**
- **3D Face Viewer:** Interactive visualization with rotation, zoom, and facial feature adjustments
- **Feature Analysis:** Detailed analysis of facial features, symmetry, and proportions
- **Wellness Indicators:** AI-generated insights about facial indicators of health and wellness
- **Real-time Adjustments:** Fine-tune facial morphological parameters with live 3D preview
- **Save Options:** Save face model to profile, retake photos, start new scan

### 4. Celebration (`FaceScanCelebrationStep`)

**Objective:** Celebrate successful face scan completion and encourage regular facial wellness tracking.

**Frontend Components:**
- `src/app/pages/FaceScan/FaceScanCelebrationStep.tsx` (Celebration step)

**Features:**
- **Success Animation:** Celebratory animations and visual feedback
- **Scan Summary:** Key facial metrics and wellness indicators from the scan
- **Wellness Insights:** Personalized recommendations for facial wellness
- **Navigation Options:** Direct access to face model viewer, insights, or new scan

---

## üìä Face Forge Tabs

### üéØ Scan CTA (`FaceScanCTA`)

**Objective:** Encourage regular facial scanning with dynamic call-to-action based on scan history and wellness tracking.

**Key Components:**
- `FaceScanStatusCard`: Current facial scan status and wellness recommendations
- `WellnessTrackingCard`: Facial wellness indicators and trends
- `FacialHealthBenefits`: Benefits of regular facial wellness monitoring
- `DynamicFaceScanCTA`: Adaptive call-to-action based on scan frequency and wellness goals

**Data Logic:**
- **Source:** `user_face_profiles` table filtered by `user_id` and scan dates
- **Wellness Analysis:** Calculate facial wellness trends and indicators
- **Dynamic Messaging:** Adapt CTA based on facial scan history and wellness patterns
- **Progress Visualization:** Visual representation of facial wellness consistency

### üëÅÔ∏è Avatar (`FaceAvatarTab`)

**Objective:** Display and interact with the user's 3D face model with facial morphological insights.

**Key Components:**
- `Face3DViewer`: Interactive 3D face model with real-time rendering
- `FacialInsightsCard`: AI-generated insights about facial features and wellness
- `FaceControls`: Camera controls, rotation, zoom, and facial view options
- `FacialAdjustmentPanel`: Fine-tune facial morphological parameters

**Data Logic:**
- **Source:** `user_face_profiles` table with latest face model data
- **3D Rendering:** Three.js with specialized facial materials and lighting
- **Real-time Updates:** Live facial morphological parameter adjustments
- **Wellness Insights:** AI-powered analysis of facial wellness indicators

### üí° Insights (`FaceInsightsTab`)

**Objective:** Present AI-generated facial insights and personalized wellness recommendations.

**Key Components:**
- `FacialWellnessDashboard`: Overall facial wellness score and key metrics
- `FacialInsightCards`: Individual insight cards with actionable wellness recommendations
- `FaceShapeAnalysis`: Detailed facial morphology and feature analysis
- `WellnessComparison`: Historical comparison with previous facial scans

**Data Logic:**
- **Source:** `face_semantic` table with generated facial insights
- **AI Analysis:** GPT-5 powered facial morphological analysis and wellness recommendations
- **Personalization:** Insights adapted to user profile and wellness goals
- **Trend Analysis:** Facial wellness evolution tracking and progress visualization

### üìö History (`FaceHistoryTab`)

**Objective:** Browse complete facial scan history with temporal comparisons and wellness evolution tracking.

**Key Components:**
- `HistoricalFaceScanModal`: Detailed view of historical facial scans with 3D face model
- `FaceScanTimelineCard`: Chronological facial scan history with key wellness metrics
- `WellnessEvolutionChart`: Visual representation of facial wellness changes over time
- `FacialComparisonTools`: Side-by-side facial scan comparisons

**Data Logic:**
- **Source:** `user_face_profiles` table with historical data
- **Temporal Analysis:** Calculate facial wellness changes between scans, identify trends
- **3D Comparison:** Historical face model reconstruction for visual comparison
- **Wellness Evolution:** Track key facial wellness indicators over time

---

## üë§ User Profile Integration

### Profile Fields Used

**Critical Fields (Required for functionality):**
- `sex`: Gender-specific facial morphological analysis and archetype matching
- `birthdate`: Age-related facial feature considerations and wellness baselines

**Optimizing Fields (Improve precision and personalization):**
- `emotions.chronotype`: Sleep pattern influence on facial wellness indicators
- `emotions.stress_level`: Stress impact on facial features and wellness
- `health.sleep_quality`: Sleep quality correlation with facial wellness
- `health.skin_conditions`: Skin health considerations for facial analysis

### Profile Impact

**Automatic updates:**
- `active_face_profile_id` updated with new face model data
- `facial_keypoints` updated based on scan analysis
- `color_palette` and `skin_tone` updated with facial color analysis

**Bidirectional synchronization:**
- Profile changes ‚Üí Recalculation of facial parameters and wellness insights
- Facial scan data ‚Üí Profile improvement suggestions and wellness goal adjustments

---

## ü§ñ Data Generated by Spatial Forge

### Structured Raw Data

**From `face-match`:**
```typescript
export interface FaceMatchResponse {
  success: boolean;
  scan_id: string;
  facial_features: {
    face_shape: 'oval' | 'round' | 'square' | 'heart' | 'diamond' | 'long' | 'triangle';
    eye_shape: 'almond' | 'round' | 'hooded' | 'monolid' | 'upturned' | 'downturned';
    nose_type: 'straight' | 'roman' | 'button' | 'aquiline' | 'upturned' | 'nubian';
    lip_fullness: 'thin' | 'average' | 'full' | 'pouty';
    facial_symmetry: number; // 0-1 score
    jawline_definition: 'soft' | 'moderate' | 'sharp';
  };
  facial_measurements: {
    face_width_mm: number;
    face_height_mm: number;
    eye_distance_mm: number;
    nose_width_mm: number;
    lip_width_mm: number;
  };
  quality_assessment: {
    front_photo_quality: number;
    profile_photo_quality: number;
    lighting_score: number;
    clarity_score: number;
  };
  processing_confidence: number;
  processing_metadata: {
    processing_time_ms: number;
    model_version: string;
    ai_model_used: string;
    tokens_used?: { input: number; output: number; };
  };
}
```

**From `face-semantic`:**
```typescript
export interface FaceSemanticResponse {
  success: boolean;
  semantic_analysis: {
    face_shape_confidence: Record<string, number>;
    feature_classifications: {
      eyes: {
        shape: string;
        size: 'small' | 'average' | 'large';
        spacing: 'close' | 'average' | 'wide';
      };
      nose: {
        type: string;
        size: 'small' | 'average' | 'large';
        bridge_height: 'low' | 'average' | 'high';
      };
      lips: {
        fullness: string;
        shape: 'straight' | 'curved' | 'bow';
        symmetry: number;
      };
      jawline: {
        definition: string;
        width: 'narrow' | 'average' | 'wide';
        angle: 'soft' | 'moderate' | 'sharp';
      };
    };
    wellness_indicators: {
      skin_quality_score: number;
      stress_indicators: string[];
      sleep_quality_indicators: string[];
      hydration_level: 'low' | 'moderate' | 'good' | 'excellent';
    };
  };
  confidence_scores: Record<string, number>;
  processing_metadata: {
    processing_time_ms: number;
    model_version: string;
  };
}
```

**From `face-refine-morphs`:**
```typescript
export interface FaceRefineMorphsResponse {
  success: boolean;
  refined_face_params: Record<string, number>;
  refinement_reasoning: string;
  confidence_improvement: number;
  ai_adjustments: Array<{
    parameter: string;
    original_value: number;
    refined_value: number;
    reasoning: string;
  }>;
  wellness_analysis: {
    overall_wellness_score: number;
    wellness_factors: Array<{
      factor: string;
      score: number;
      impact: 'positive' | 'negative' | 'neutral';
      recommendations: string[];
    }>;
  };
  processing_metadata: {
    processing_time_ms: number;
    model_version: string;
    tokens_used?: { input: number; output: number; };
  };
}
```

**From `face-commit`:**
```typescript
export interface FaceCommitResponse {
  success: boolean;
  face_profile_id: string;
  final_face_params: Record<string, number>;
  archetype_mix: Record<string, number>;
  skin_tone: {
    base_color: string;
    undertone: string;
    saturation: number;
    brightness: number;
  };
  wellness_summary: {
    overall_score: number;
    key_indicators: string[];
    recommendations: string[];
  };
  profile_updated: boolean;
  processing_metadata: {
    total_processing_time_ms: number;
    pipeline_steps_completed: number;
  };
}
```

---

## üìã TypeScript Contracts

### Main Interfaces

```typescript
// src/system/data/repositories/faceScanRepo.ts
export interface UserFaceProfile {
  id: string;
  user_id: string;
  active: boolean;
  final_face_params: Record<string, number>;
  archetype_mix?: Record<string, number>;
  skin_tone?: FaceSkinTone;
  head_model_url?: string;
  preview_url?: string;
  created_at: string;
  updated_at: string;
  client_scan_id?: string;
  estimate_result?: FaceMatchResponse;
  match_result?: FaceMatchResponse;
  photos_metadata?: PhotosMetadata;
  refine_result?: FaceRefineMorphsResponse;
  resolved_gender?: 'feminine' | 'masculine' | 'neutral';
  semantic_result?: FaceSemanticResponse;
}

export interface FaceScanRequest {
  user_id: string;
  front_photo: string; // Base64
  profile_photo: string; // Base64
  client_scan_id: string;
  user_profile: UserProfileContext;
}

export interface FaceSkinTone {
  base_color: string;
  undertone: string;
  saturation: number;
  brightness: number;
}

export interface PhotosMetadata {
  front_photo_quality: number;
  profile_photo_quality: number;
  lighting_conditions: string;
  capture_timestamp: string;
}
```

---

## ‚öôÔ∏è Detailed Edge Functions

### üéØ `face-match`

**Role:** Facial feature detection and initial morphological parameter calculation.

**Models:**
- **OpenAI GPT-5 Vision**: Facial photo analysis and feature extraction

**Specialties:**
- Facial feature detection and classification
- Face shape and feature measurements
- Photo quality assessment and validation
- Initial facial morphological parameter calculation

**Performance:**
- **Duration:** 5-20 seconds
- **Cost:** ~$0.001 - $0.005 per analysis
- **Confidence:** 80-90% average

### üß† `face-semantic`

**Role:** Semantic facial analysis and morphological classification with wellness indicators.

**Model:** GPT-5 Mini + specialized facial analysis algorithms

**Specialties:**
- Face shape and feature classification
- Facial symmetry and proportion analysis
- Wellness indicator detection (stress, sleep, hydration)
- Detailed feature categorization and scoring

**Performance:**
- **Duration:** 3-12 seconds
- **Cost:** ~$0.0005 - $0.002 per analysis
- **Confidence:** 85-95% average

### ‚ú® `face-refine-morphs`

**Role:** AI-powered facial morphological refinement with wellness analysis.

**Model:** GPT-5 Mini with specialized facial morphological prompts

**Specialties:**
- Facial parameter refinement based on AI analysis
- Wellness factor analysis and scoring
- Coherence validation and adjustment
- Detailed reasoning for facial adjustments

**Performance:**
- **Duration:** 8-25 seconds
- **Cost:** ~$0.0008 - $0.004 per analysis
- **Confidence:** 90-95% average

### üíæ `face-commit`

**Role:** Final face model generation and data persistence with profile integration.

**Model:** 3D facial processing algorithms + profile integration logic

**Specialties:**
- Final face model data compilation and validation
- Database persistence with RLS compliance
- User profile synchronization and updates
- Face model generation pipeline completion

**Performance:**
- **Duration:** 3-10 seconds
- **Cost:** ~$0.0001 - $0.0005 per commit
- **Confidence:** 95-99% average

---

## üéØ Optimizations and Performance

### Frontend
- **React Query:** Intelligent cache with adaptive `staleTime` and persistence in `localStorage`
- **Three.js Optimization:** Efficient 3D facial rendering with specialized facial shaders
- **Zustand:** Optimized state management with selective subscriptions
- **Image Processing:** Client-side facial image optimization before AI analysis
- **Progressive Loading:** Staged loading of 3D facial assets and textures

### Backend
- **Server Cache:** `user_face_profiles` and `face_semantic` tables with intelligent invalidation
- **Pipeline Optimization:** Parallel processing where possible, sequential where dependencies exist
- **Rate Limiting:** Protection against excessive AI API calls with user quotas
- **Retry Logic:** Robust error handling with exponential backoff and fallback strategies
- **Resource Management:** Efficient memory usage and cleanup in Edge Functions

### Database
- **RLS:** Row-level security for all facial scan data
- **Indexes:** Optimized for frequent queries (`user_id`, `active`, `created_at`)
- **Triggers:** Automatic `updated_at` timestamps and profile synchronization
- **Vector Storage:** Efficient storage of facial embeddings and morphological parameters

---

## üí∞ Costs and Governance

### Costs per Component
- **Face Matching (face-match):** ~$0.001 - $0.005 per scan
- **Semantic Analysis (face-semantic):** ~$0.0005 - $0.002 per scan
- **Morphological Refinement (face-refine-morphs):** ~$0.0008 - $0.004 per scan
- **Face Commitment (face-commit):** ~$0.0001 - $0.0005 per scan

### Total Pipeline Cost
- **Complete Face Scan:** ~$0.0024 - $0.0115 per scan
- **With Wellness Analysis:** ~$0.003 - $0.015 per scan

### Cost Optimizations
- **Intelligent Cache:** Avoid unnecessary re-processing of similar facial scans
- **Progressive Fallback:** Use simpler models if advanced ones fail, reducing costs
- **User Quotas:** Configurable limits per user to control expenses
- **Batch Processing:** Optimize multiple facial operations where possible
- **Token Monitoring:** Precise tracking of token consumption per model and operation

### Governance
- **User Quotas:** Monthly facial scan limits with premium tiers
- **Audit Trail:** Complete traceability of AI calls and associated costs
- **Cost Alerts:** Notifications when predefined cost thresholds are exceeded
- **Usage Analytics:** Detailed breakdown of costs per user and operation type

---

## üîç Observability and Debugging

### Structured Logs
```typescript
// Example face scan processing log
{
  level: 'info',
  message: 'Face scan pipeline completed successfully',
  context: {
    userId: 'uuid',
    faceProfileId: 'face_profile_123',
    clientScanId: 'client_face_123',
    pipelineSteps: ['match', 'semantic', 'refine', 'commit'],
    totalProcessingTime: 28000,
    finalConfidence: 0.94,
    faceParametersCount: 68,
    wellnessScore: 0.87,
    aiModelsUsed: ['gpt-5-vision', 'gpt-5-mini'],
    totalTokensUsed: 2100,
    estimatedCost: 0.008,
    philosophy: 'face_scan_pipeline_audit'
  },
  timestamp: '2025-01-24T14:30:00.000Z'
}
```

### Key Metrics
- **E2E SLO:** < 60 seconds (capture + processing + results display)
- **Success Rate:** > 95% for complete pipeline
- **Average Confidence:** > 90% for facial morphological parameters
- **Cache Hit Rate:** > 70% for repeated similar facial scans
- **3D Rendering Performance:** 60 FPS on modern devices

### Debugging
- **`clientScanId`:** End-to-end facial scan tracking across all pipeline steps
- **Correlation IDs:** Frontend and backend request linking with detailed tracing
- **Error Boundaries:** Graceful error handling in 3D face viewer and processing steps
- **Fallback Strategies:** Progressive degradation in case of AI or processing failures
- **Performance Monitoring:** Real-time tracking of 3D facial rendering performance

---

## üß† Future Integration with Central Brain

### Exportable Data

**Quantitative Metrics:**
- `final_face_params`: Complete facial morphological parameter set
- `facial_measurements`: Detailed facial measurements and proportions
- `wellness_indicators`: Facial wellness scores and health indicators
- `symmetry_scores`: Facial symmetry and balance metrics

**Qualitative Insights:**
- `facial_wellness_insights`: AI-generated facial wellness insights
- `face_shape_classification`: Semantic facial type and characteristics
- `stress_indicators`: Facial stress and wellness indicators

**Temporal Patterns:**
- Facial scan frequency and consistency
- Facial wellness evolution over time
- Stress and sleep quality tracking through facial indicators

### Future Correlations

**With Energy Forge:**
- Correlation between facial wellness indicators and activity levels
- Stress recovery tracking based on facial analysis
- Sleep quality correlation with activity performance

**With Nutritional Forge:**
- Facial wellness changes correlated with nutritional intake
- Hydration levels reflected in facial indicators
- Skin quality improvements based on nutrition optimization

**With Body Forge:**
- Overall wellness correlation between facial and body indicators
- Stress impact on both facial and body composition
- Holistic health tracking combining facial and body metrics

### Central Brain Architecture

**Data Sources:**
```typescript
interface CentralBrainFaceInput {
  // Face Forge
  facialMorphologyData: UserFaceProfile[];
  facialWellnessHistory: FacialWellnessHistory[];
  facialInsights: FacialWellnessInsights[];
  
  // Cross-system correlations
  activityFaceCorrelations: ActivityFaceCorrelation[];
  nutritionFaceCorrelations: NutritionFaceCorrelation[];
  sleepFaceCorrelations: SleepFaceCorrelation[];
  
  // User Profile
  wellnessGoals: WellnessGoals;
  facialPreferences: FacialPreferences;
}
```

**Expected Output:**
```typescript
interface HolisticFaceRecommendations {
  facialWellnessScore: number;
  stressManagementPlan: StressManagementPlan[];
  sleepOptimization: SleepOptimization[];
  crossSystemWellnessInsights: CrossSystemWellnessInsight[];
  facialWellnessPlan: FacialWellnessPlan;
  holisticHealthRecommendations: HealthRecommendation[];
}
```

---

## üîß Maintenance and Evolution

### Extension Points
- **Advanced Facial Models:** Integration of more detailed facial morphological models
- **Real-time Wellness Tracking:** Continuous facial wellness monitoring
- **Enhanced Wellness Indicators:** Additional health and wellness metrics from facial analysis
- **AR Integration:** Augmented reality overlay for real-time facial wellness analysis
- **Wearable Integration:** Sync with sleep trackers and stress monitors

### Continuous Monitoring
- **Performance:** SLO and response time monitoring across all pipeline steps
- **Costs:** Continuous optimization of AI API calls and processing efficiency
- **Quality:** User feedback on facial model accuracy and wellness insights
- **Evolution:** Adaptation based on usage patterns and wellness tracking advances

---

## üìû Support and Contribution

For any technical questions or improvement suggestions regarding the Face Scan Pipeline, consult this document or contact the development team.

**Key files to consult:**
- Pipeline: `src/app/pages/FaceScan/FaceScanPhotoCaptureStep.tsx`
- 3D Face Model: Integration with `src/components/3d/Avatar3DViewer.tsx`
- Data hooks: `src/system/data/repositories/faceScanRepo.ts`
- Edge Functions: `supabase/functions/face-*`

---

*This documentation is kept up to date with each evolution of the Face Scan Pipeline. Last revision: January 2025*